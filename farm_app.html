<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Farm App</title>
    <link rel="stylesheet" href="style/jquery.mobile-1.2.0.min.css" />
    <script src="scripts/jquery.js" type="text/javascript"></script>
    <script src="scripts/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <link rel="Stylesheet" href="style/MyTheme.min.css" />
    <link rel="Stylesheet" href="style/makememories.css" />
    <script src="scripts/stoller.js" type="text/javascript"></script>
    <script type="text/javascript" src="cordova-2.1.0.js"></script>
    <script language="javascript" type="text/javascript">
        var Cropid;
        var Conditionid;
        var Timingid;
        $(document).ready(function () {
            $("#dvMessage").hide();
            $("#dvProcessing").hide();
            var querystring = "?callback=?&action=getcrop";
            $("#dvProcessing").show();
            getDataForGetCrop(querystring);



            $("#SelectCrop").change(function () {
                Cropid = $("select#SelectCrop").val();
                var querystring1 = "?callback=?&cropid=" + Cropid + "&action=gettiming";
                $("#dvProcessing").show();
                getDataForGetTiming(querystring1);
            });

            $("#SelectTiming").change(function () {
                Timingid = $("select#SelectTiming").val();
                var querystring1 = "?callback=?&cropid=" + Cropid + "&timingid=" + Timingid + "&action=getcondition";
                $("#dvProcessing").show();
                getDataForGetCondition(querystring1);
            });
                          $("#SelectCondition").change(function () {
                                                       Conditionid = $("select#SelectCondition").val();
                                                       });

        });

        function SubmitMe() {
            //            alert("CropId" + Cropid);
            //            alert("Timingid" + Timingid);
            //            alert("Conditionid" + Conditionid);
            var querystring1 = "?callback=?&cropid=" + Cropid + "&timingid=" + Timingid + "&conditionid=" + Conditionid + "&action=getreasonresponse";
            $("#dvProcessing").show();
            getDataForGetReasonResponse(querystring1);
        }
        function GetReasonResponse(Response) {

            $.each(Response.ReasonResponse, function (key, val) {
                $("#dvProcessing").show();
                if (val.ResponseProduct) {
                    $("#response").val(val.ResponseProduct);
                }
                if (val.Reason) {
                    $("textarea#recommend").text(val.Reason);
                }


                $("#result").show();

                $("#dvProcessing").hide();



            });



        }


        function GetCondition(Response) {
            if (Response.SelectCondition != "") {
                $("#dvProcessing").hide();
                $("#SelectCondition").children('option').remove();
                $.each(Response.Condition, function (key, val) {
                    $("#SelectCondition").append("<option value=\"" + val.ID + "\">" + val.Name + "</option>");
                    Conditionid = $("select#SelectCondition").val();
                });

                $("#SelectCondition").selectmenu('refresh', true);
            }
            else {

                var querystring = "?callback=?&action=getcondition";
                getDataForGetCondition(querystring);


            }
        }


        function GetTiming(Response) {
            if (Response.Timing != "") {
                $("#dvProcessing").hide();
                $("#SelectTiming").children('option').remove();
                $.each(Response.Timing, function (key, val) {
                    $("#SelectTiming").append("<option value=\"" + val.ID + "\">" + val.Name + "</option>");
                    Timingid = $("select#SelectTiming").val();
                    var querystring1 = "?callback=?&cropid=" + Cropid + "&timingid=" + Timingid + "&action=getcondition";
                    $("#dvProcessing").show();
                    getDataForGetCondition(querystring1);

                });

                $("#SelectTiming").selectmenu('refresh', true);
            }
            else {

                var querystring = "?callback=?&action=gettiming";
                getDataForGetTiming(querystring);


            }
        }


        function GetCrop(Response) {
            if (Response.Crop != "") {
                //  $("#dvProcessing").hide();
                $("#SelectCrop").children('option').remove();
                $.each(Response.Crop, function (key, val) {
                    $("#SelectCrop").append("<option value=\"" + val.ID + "\">" + val.Name + "</option>");
                    Cropid = $("select#SelectCrop").val();
                    var querystring1 = "?callback=?&cropid=" + Cropid + "&action=gettiming";
                    //   $("#dvProcessing").show();
                    getDataForGetTiming(querystring1);

                });

                $("#SelectCrop").selectmenu('refresh', true);
            }
            else {

                var querystring = "?callback=?&action=getcrop";
                getDataForGetCrop(querystring);

            }

        }
        //exix start
    

        function submitBack() {
            document.forms[0].action = "home.html";
            document.forms[0].submit();
           
        }

      
       
    </script>
</head>
<body style="background-color: White">
    <div class="modal" id="dvProcessing">
    </div>
    â€‹
    <div data-role="page" data-theme="a">
        <!--<div data-theme="" data-role="header" data-position="fixed"  class="hedertitlediv" >-->
        <div data-role="content">
            <form id="Form2" method="post" action=" ">
            <div style="height: 50px">
            </div>
            <div data-role="fieldcontain">
                <label for="SelectCrop">
                    Select Crop:</label><div>
                        <select id="SelectCrop" name="SelectCrop" data-theme="a" data-native-menu="false">
                        </select></div>
            </div>
            <div data-role="fieldcontain">
                <label for="SelectTiming">
                    Timing:</label><div>
                        <select id="SelectTiming" name="SelectTiming" data-theme="a" data-native-menu="false">
                        </select></div>
            </div>
            <div data-role="fieldcontain">
                <label for="SelectCondition">
                    Condition :</label>
                <div>
                    <select id="SelectCondition" name="SelectCondition" data-theme="a" data-native-menu="false">
                    </select></div>
            </div>
            <div align="center" class="submit">
                <input id="btn1" type="button" value="Go" data-icon="arrow-r" data-inline="true" onclick="javascript:SubmitMe();" />
            </div>
            <div id="result" hidden="true">
                <div data-role="fieldcontain">
                    <label for="response">
                        Recommendatation :</label>
                    <div>
                        <input type="text" id="response" size="51" value="Result goes here" style="color: Black"
                            readonly="true" />
                    </div>
                </div>
                <div data-role="fieldcontain">
                    <label for="recommend">
                        Explanation of Result :</label>
                    <div>
                        <textarea cols="40" rows="4" id="recommend" readonly style="color: Black">Recommendation goes here</textarea>
                    </div>
                </div>
            </div>
            </form>
        </div>
         <a onclick="javascript:submitBack();" style="text-decoration: none; float:left;">Back</a>
        <a href="contactus.html" style="text-decoration: none; float:right;">Contact Us</a>       
    </div>
</body>
</html>
